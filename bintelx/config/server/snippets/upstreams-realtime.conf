# snippets/upstreams-realtime.conf
# Shared backend services — includable by any project
# API upstream is NOT here — each project defines its own

resolver 127.0.0.1 valid=30s;

# SSE + WebSocket (Python ASGI)
upstream stream_backend {
    zone stream_shm 64k;
    server 127.0.0.1:8000;
}

# Swoole channel server (SSE fallback)
upstream swoole_cluster {
    server 127.0.0.1:9501;
}

# WebRTC signaling (webrtc-rs)
upstream webrtc_signaling_server {
    zone webrtc_shm 64k;
    server 127.0.0.1:9000;
}
