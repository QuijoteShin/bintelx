# snippets/upstreams-realtime.conf
# Upstreams compartidos — incluido UNA VEZ desde nginx.global.conf (nivel http {})
# Si un proyecto necesita valores distintos, define sus propios upstreams en config/upstream.conf

# Channel Server — WebSocket, Stream, SSE (app/channel.server.php)
# Puerto debe coincidir con CHANNEL_PORT en .env (default 8000)
upstream channel_backend {
    zone channel_shm 64k;
    server 127.0.0.1:8000;
}

# WebRTC signaling
upstream webrtc_backend {
    zone webrtc_shm 64k;
    server 127.0.0.1:9000;
}
