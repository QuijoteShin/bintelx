# Bintelx Environment Configuration
# Copy this file to .env and customize for your environment
#
# FILE-BASED SECRETS (Recommended for production):
# Use SECRET_PLAIN_* or SECRET_JSON_* prefixes to load sensitive values from files.
# The actual variable name will be created without the prefix.
#
# Examples:
#   SECRET_PLAIN_DB_PASSWORD=secrets/db_password.secret → creates DB_PASSWORD variable
#   SECRET_JSON_GOOGLE_OAUTH=secrets/google.json → creates GOOGLE_OAUTH variable with JSON content
#
# Allowed extensions:
#   SECRET_PLAIN_*: .secret, .key, .txt
#   SECRET_JSON_*: .json

# Application
APP_ENV=production
APP_DEBUG=false
APP_URL=https://your-domain.com

# Database Configuration
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=bintelx_core
DB_USERNAME=your_db_user
# Option 1: Direct value (not recommended for production)
# DB_PASSWORD=your_secure_password
# Option 2: File-based secret (recommended)
SECRET_PLAIN_DB_PASSWORD=secrets/db_password.secret
DB_CHARSET=utf8mb4
DB_COLLATION=utf8mb4_unicode_520_ci

# Security — JWT
# Option 1: Direct value (not recommended for production)
# JWT_SECRET=your_jwt_secret_here
# JWT_XOR_KEY=your_xor_key_here
# Option 2: File-based secrets (recommended)
SECRET_PLAIN_JWT_SECRET=secrets/jwt_secret.secret
SECRET_PLAIN_JWT_XOR_KEY=secrets/jwt_xor_key.secret
JWT_ALGORITHM=HS256
JWT_TOKEN_TTL=86400

# System-to-system auth (ROUTER_SCOPE_SYSTEM — endpoints _internal)
# Generate: openssl rand -hex 32 > secrets/system_secret.secret
SECRET_PLAIN_SYSTEM_SECRET=secrets/system_secret.secret

# CORS Settings
CORS_ALLOWED_ORIGINS=https://your-domain.com
CORS_ALLOWED_METHODS=GET,POST,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Origin,X-Auth-Token,X-Requested-With,Content-Type,Accept,Authorization

# Default Timezone
DEFAULT_TIMEZONE=America/Santiago

# Custom Modules Path (external directory for project-specific modules)
CUSTOM_PATH=/var/www/your_project/bintelx

# File Storage
LOG_PATH=/var/www/bintelx/log
UPLOAD_PATH=/var/www/bintelx/storage

# System Configuration
SYSTEM_WEB_USER=www-data
SYSTEM_WEB_GROUP=www-data

# Logging Configuration
LOG_LEVEL=ERROR          # Nivel para ARCHIVO (DEBUG, INFO, WARNING, ERROR, NONE)
LOG_LEVEL_CLI=DEBUG      # Nivel para STDOUT (channel.server ve todo en consola)
LOG_TO_CLI=true
LOG_TO_USER=false

# Swoole Channel Server (WebSocket + Cache compartido)
CHANNEL_HOST=127.0.0.1
CHANNEL_PORT=8000
CHANNEL_WORKER_NUM=      # vacío = auto (cpu_count * 2)
CHANNEL_TASK_WORKER_NUM= # vacío = 0

# Multi-tenant — Global Tenant IDs (visible to all tenants via Tenant::)
GLOBAL_TENANT_IDS=2000000000
